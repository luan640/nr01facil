{% extends "base.html" %}
{% load static %}

{% block title %}Definir Nova Senha | NR01FACIL{% endblock %}

{% block extra_head %}
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'css/auth.css' %}" />
{% endblock %}

{% block content %}
<main class="auth-page">
  <section class="auth-card">
    <div class="auth-orb"></div>
    <header class="auth-card__header">
      <div class="auth-brand">
        <p class="auth-brand__name">NR01FACIL</p>
      </div>
      <h1 class="auth-title">Nova senha</h1>
      <p class="auth-subtitle">Crie uma senha segura para continuar.</p>
    </header>

    {% if validlink %}
      {% if form.errors %}
        <div class="auth-alert">Verifique os campos e tente novamente.</div>
      {% endif %}
      <form method="post" class="auth-form">
        {% csrf_token %}
        <div class="auth-field">
          <label for="id_new_password1">Nova senha</label>
          {{ form.new_password1 }}
        </div>
        <div class="auth-field">
          <label for="id_new_password2">Confirmar senha</label>
          {{ form.new_password2 }}
        </div>
        <button type="submit" class="auth-submit" data-loading-text="Salvando...">Atualizar senha</button>
      </form>
    {% else %}
      <div class="auth-alert">Este link expirou ou é inválido.</div>
      <p class="auth-footer">Voltar para <a class="auth-link" href="{% url 'password_reset' %}">redefinir acesso</a></p>
    {% endif %}
  </section>
</main>
{% endblock %}
